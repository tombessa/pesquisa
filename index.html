<!DOCTYPE html>
    <html lang="pt-BR">
    <head>
      <base target="_top">
      <title>Consentimento para Formul√°rio</title>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <style>
        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }
        
        body {
          font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
          background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
          min-height: 100vh;
          display: flex;
          justify-content: center;
          align-items: center;
          padding: 20px;
          color: #333;
        }
        
        .consent-container {
          background: rgba(255, 255, 255, 0.98);
          border-radius: 20px;
          padding: 40px;
          width: 100%;
          max-width: 600px;
          box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
          backdrop-filter: blur(10px);
          border: 1px solid rgba(255, 255, 255, 0.3);
          animation: fadeIn 0.5s ease-out;
        }
        
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        
        .header {
          text-align: center;
          margin-bottom: 30px;
        }
        
        .header-icon {
          font-size: 48px;
          margin-bottom: 15px;
          color: #1e3c72;
        }
        
        .header h1 {
          color: #1e3c72;
          font-size: 28px;
          margin-bottom: 15px;
          font-weight: 700;
          line-height: 1.3;
        }
        
        .header p {
          color: #4a5568;
          font-size: 16px;
          line-height: 1.6;
          text-align: justify;
          margin-bottom: 10px;
        }
        
        .contact-info {
          background: #e6f7ff;
          border-radius: 10px;
          padding: 15px;
          margin-top: 15px;
          border-left: 4px solid #1890ff;
        }
        
        .contact-info p {
          color: #0050b3;
          font-size: 14px;
          margin: 0;
          text-align: center;
        }
        
        .location-section {
          background: #f0f9ff;
          border-radius: 12px;
          padding: 20px;
          margin-bottom: 25px;
          border: 1px solid #91d5ff;
        }
        
        .location-section h3 {
          color: #0050b3;
          font-size: 18px;
          margin-bottom: 15px;
          display: flex;
          align-items: center;
          gap: 10px;
          font-weight: 600;
        }
        
        .location-display {
          background: white;
          padding: 15px;
          border-radius: 10px;
          font-family: 'Segoe UI', sans-serif;
          font-size: 15px;
          color: #1e3c72;
          border: 1px solid #91d5ff;
          margin-top: 10px;
          line-height: 1.5;
        }
        
        .location-details {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 10px;
          margin-top: 10px;
        }
        
        .location-item {
          background: #f6ffed;
          padding: 8px 12px;
          border-radius: 6px;
          font-size: 13px;
          border: 1px solid #b7eb8f;
        }
        
        .location-item strong {
          color: #389e0d;
          display: block;
          margin-bottom: 2px;
        }
        
        .consent-section {
          background: #fff7e6;
          border-radius: 12px;
          padding: 25px;
          margin-bottom: 30px;
          border: 1px solid #ffd591;
        }
        
        .consent-section h3 {
          color: #d46b08;
          font-size: 18px;
          margin-bottom: 15px;
          display: flex;
          align-items: center;
          gap: 10px;
          font-weight: 600;
        }
        
        .consent-checkbox {
          display: flex;
          align-items: flex-start;
          gap: 15px;
          cursor: pointer;
          padding: 15px;
          border-radius: 10px;
          transition: background-color 0.2s;
          background: white;
          border: 1px solid #ffd591;
        }
        
        .consent-checkbox:hover {
          background-color: #fff7e6;
        }
        
        .checkbox-input {
          display: none;
        }
        
        .checkbox-custom {
          width: 24px;
          height: 24px;
          border: 2px solid #d46b08;
          border-radius: 4px;
          display: flex;
          align-items: center;
          justify-content: center;
          flex-shrink: 0;
          transition: all 0.2s;
          margin-top: 2px;
        }
        
        .checkbox-custom::after {
          content: '‚úì';
          color: white;
          font-size: 16px;
          font-weight: bold;
          opacity: 0;
          transition: opacity 0.2s;
        }
        
        .checkbox-input:checked + .checkbox-custom {
          background-color: #d46b08;
          border-color: #d46b08;
        }
        
        .checkbox-input:checked + .checkbox-custom::after {
          opacity: 1;
        }
        
        .checkbox-label {
          color: #1e3c72;
          font-size: 16px;
          line-height: 1.6;
          user-select: none;
        }
        
        .checkbox-label strong {
          color: #d46b08;
        }
        
        .error-message {
          background: #fff2e8;
          color: #d46b08;
          padding: 15px;
          border-radius: 10px;
          margin-top: 15px;
          display: none;
          align-items: center;
          gap: 12px;
          animation: shake 0.5s;
          border: 1px solid #ffbb96;
        }
        
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          25% { transform: translateX(-5px); }
          75% { transform: translateX(5px); }
        }
        
        .error-message.show {
          display: flex;
        }
        
        .buttons-container {
          display: flex;
          gap: 20px;
          margin-top: 10px;
        }
        
        .btn {
          flex: 1;
          padding: 18px 24px;
          border: none;
          border-radius: 12px;
          font-size: 16px;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.3s;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 12px;
        }
        
        .btn-primary {
          background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
          color: white;
        }
        
        .btn-primary:hover:not(:disabled) {
          transform: translateY(-2px);
          box-shadow: 0 10px 20px rgba(30, 60, 114, 0.3);
        }
        
        .btn-primary:disabled {
          opacity: 0.5;
          cursor: not-allowed;
          transform: none !important;
          box-shadow: none !important;
        }
        
        .btn-secondary {
          background: #f0f0f0;
          color: #595959;
          border: 1px solid #d9d9d9;
        }
        
        .btn-secondary:hover {
          background: #e8e8e8;
        }
        
        .loader {
          display: none;
          width: 20px;
          height: 20px;
          border: 3px solid rgba(255, 255, 255, 0.3);
          border-top: 3px solid white;
          border-radius: 50%;
          animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
        
        .redirecting .loader {
          display: inline-block;
        }
        
        .footer {
          margin-top: 30px;
          padding-top: 20px;
          border-top: 1px solid #f0f0f0;
          text-align: center;
          color: #8c8c8c;
          font-size: 13px;
        }
        
        .footer a {
          color: #1e3c72;
          text-decoration: none;
          font-weight: 500;
        }
        
        .footer a:hover {
          text-decoration: underline;
        }
        
        .university-badge {
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 10px;
          margin-top: 15px;
          padding: 10px;
          background: #fafafa;
          border-radius: 8px;
        }
        
        .university-badge img {
          height: 30px;
        }
        
        .university-badge span {
          font-size: 12px;
          color: #595959;
        }
        
        @media (max-width: 600px) {
          .consent-container {
            padding: 25px;
          }
          
          .buttons-container {
            flex-direction: column;
          }
          
          .header h1 {
            font-size: 24px;
          }
          
          .location-details {
            grid-template-columns: 1fr;
          }
        }
      </style>
    </head>
    <body>
      <div class="consent-container">
        <!-- CABE√áALHO -->
        <div class="header">
          <div class="header-icon"><img src="https://www.uerj.br/wp-content/uploads/2018/02/cropped-logomarca-uerj.png" width="100" height="100" alt="Small Image"></div>
          <h1>Um Estudo com Motoristas e Usu√°rios</h1>
          <p>Este question√°rio integra uma pesquisa acad√™mica desenvolvida no √¢mbito de Trabalho de Conclus√£o de Curso da Faculdade de Direito na Universidade do Estado do Rio de Janeiro, com o objetivo de compreender, de forma sistem√°tica e fundamentada, aspectos relacionados √†s condi√ß√µes e percep√ß√µes sobre o trabalho mediado por plataformas digitais para transporte de pessoas e seus impactos nas rela√ß√µes de trabalho.</p>
          <p>As informa√ß√µes coletadas s√£o an√¥nimas e ser√£o utilizadas exclusivamente para fins cient√≠ficos, contribuindo para a produ√ß√£o de conhecimento qualificado e para o avan√ßo da pesquisa no Brasil, com rigor metodol√≥gico e seriedade compat√≠veis com a finalidade acad√™mica do estudo.</p>
          
          <div class="contact-info">
            <p>Qualquer d√∫vida pode ser encaminhada para: bessa.antonyonne@graduacao.uerj.br</p>
          </div>
        </div>
        
        <!-- SE√á√ÉO DE GEOLOCALIZA√á√ÉO -->
        <div class="location-section">
          <h3>üìç Geolocaliza√ß√£o Detectada</h3>
          <div class="ip-display" id="ipDisplay">${sLocalizacao}</div>
        </div>
        
        <!-- SE√á√ÉO DE CONSENTIMENTO -->
        <div class="consent-section">
          <h3>‚ö†Ô∏è Termo de Consentimento</h3>
          
          <label class="consent-checkbox">
            <input type="checkbox" id="consentCheckbox" class="checkbox-input">
            <span class="checkbox-custom"></span>
            <span class="checkbox-label">
              <strong>Eu concordo em participar desta pesquisa acad√™mica</strong> e autorizo o uso das minhas respostas para fins exclusivamente cient√≠ficos, conforme descrito acima. Declaro que fui devidamente informado sobre os objetivos da pesquisa e que minha participa√ß√£o √© volunt√°ria.
            </span>
          </label>
          
          <!-- MENSAGEM DE ERRO -->
          <div class="error-message" id="errorMessage">
            <span>‚ö†Ô∏è</span>
            <span>√â necess√°rio concordar com o termo de consentimento para participar da pesquisa.</span>
          </div>
        </div>
        
        <!-- BOT√ïES DE A√á√ÉO -->
        <div class="buttons-container">
          <button class="btn btn-secondary" id="cancelBtn">
            <span>‚úñÔ∏è</span>
            N√£o Participar
          </button>
          
          <button class="btn btn-primary" id="proceedBtn" disabled>
            <span>‚û°Ô∏è</span>
            <span class="btn-text">Participar da Pesquisa</span>
            <div class="loader"></div>
          </button>
        </div>
        
        <!-- FOOTER -->
        <div class="footer">
          <p>Esta pesquisa segue os princ√≠pios √©ticos da Resolu√ß√£o CNS 510/2016.</p>
          <div id="content-core"><p><a href="https://www.gov.br/conselho-nacional-de-saude/pt-br/atos-normativos/resolucoes/2016/resolucao-no-510.pdf/@@download/file"><img border="0" src="pdf.png" alt="application/pdf">Resolu√ß√£o n¬∫ 510.pdf</a><span class="discreet">‚Äî 308 KB</span></p></div>
          <div class="university-badge">
            <span>Faculdade de Direito - Universidade do Estado do Rio de Janeiro</span>
          </div>
          <p>Seus dados ser√£o tratados conforme nossa <a href="#" id="privacyLink">Pol√≠tica de Privacidade da Pesquisa</a>.</p>
          <p style="margin-top: 5px; font-size: 12px;">Os dados de Geolocaliza√ß√£o e e-mail ser√£o utilizados apenas para fins de Pesquisa e remo√ß√£o posterior do consentimento.</p>
        </div>
      </div>

      <script>
        // VARI√ÅVEIS
        let isRedirecting = false;
        const prefilledURL = "${prefilledURL}";
        
        // ELEMENTOS DOM
        const consentCheckbox = document.getElementById('consentCheckbox');
        const proceedBtn = document.getElementById('proceedBtn');
        const cancelBtn = document.getElementById('cancelBtn');
        const errorMessage = document.getElementById('errorMessage');
        const privacyLink = document.getElementById('privacyLink');
        
        // INICIALIZA√á√ÉO
        document.addEventListener('DOMContentLoaded', function() {
          setupEventListeners();
          updateProceedButton();
        });
        
        // CONFIGURAR EVENT LISTENERS
        function setupEventListeners() {
          // Checkbox de consentimento
          consentCheckbox.addEventListener('change', function() {
            updateProceedButton();
            hideErrorMessage();
          });
          
          // Bot√£o de prosseguir
          proceedBtn.addEventListener('click', function(e) {
            e.preventDefault();
            handleProceed();
          });
          
          // Bot√£o de cancelar
          cancelBtn.addEventListener('click', function() {
            if (confirm('Tem certeza que deseja cancelar? Seus dados n√£o ser√£o coletados.')) {
              window.location.href = 'about:blank';
            }
          });
          
          // Link de pol√≠tica de privacidade
          privacyLink.addEventListener('click', function(e) {
            e.preventDefault();
            showPrivacyModal();
          });
          
          // Permitir Enter para prosseguir (apenas se checkbox marcado)
          document.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && consentCheckbox.checked && !isRedirecting) {
              handleProceed();
            }
          });
        }
        
        // ATUALIZAR ESTADO DO BOT√ÉO DE PROSSEGUIR
        function updateProceedButton() {
          const isChecked = consentCheckbox.checked;
          
          proceedBtn.disabled = !isChecked;
          
          if (isChecked) {
            proceedBtn.title = 'Clique para prosseguir para o formul√°rio';
          } else {
            proceedBtn.title = 'Marque a caixa de consentimento para habilitar';
          }
        }
        
        // MANIPULAR TENTATIVA DE PROSSEGUIR
        function handleProceed() {
          if (isRedirecting) return;
          
          if (!consentCheckbox.checked) {
            showErrorMessage();
            return;
          }
          
          // Iniciar redirecionamento
          isRedirecting = true;
          proceedBtn.classList.add('redirecting');
          proceedBtn.querySelector('.btn-text').textContent = 'Redirecionando...';
          
          // Redirecionar ap√≥s pequeno delay para feedback visual
          setTimeout(() => {
            window.location.href = prefilledURL;
          }, 500);
        }
        
        // MOSTRAR MENSAGEM DE ERRO
        function showErrorMessage() {
          errorMessage.classList.add('show');
          
          // Focar no checkbox
          consentCheckbox.focus();
          
          // Remover mensagem ap√≥s 5 segundos
          setTimeout(hideErrorMessage, 5000);
        }
        
        // OCULTAR MENSAGEM DE ERRO
        function hideErrorMessage() {
          errorMessage.classList.remove('show');
        }
        
        // MODAL DE POL√çTICA DE PRIVACIDADE
        function showPrivacyModal() {
          const modalHTML = \`
            <div style="
              position: fixed;
              top: 0;
              left: 0;
              width: 100%;
              height: 100%;
              background: rgba(0,0,0,0.7);
              display: flex;
              justify-content: center;
              align-items: center;
              z-index: 1000;
              padding: 20px;
            ">
              <div style="
                background: white;
                padding: 30px;
                border-radius: 15px;
                max-width: 700px;
                max-height: 80vh;
                overflow-y: auto;
                box-shadow: 0 10px 40px rgba(0,0,0,0.2);
              ">
                <h2 style="color: #1e3c72; margin-bottom: 20px; border-bottom: 2px solid #1e3c72; padding-bottom: 10px;">
                  Pol√≠tica de Privacidade da Pesquisa
                </h2>
                <div style="color: #4a5568; line-height: 1.6; font-size: 14px;">
                  <h3 style="color: #1e3c72; margin: 20px 0 10px 0;">1. Finalidade da Coleta</h3>
                  <p>Os dados coletados nesta pesquisa t√™m finalidade exclusivamente acad√™mica e cient√≠fica, visando a produ√ß√£o de conhecimento sobre trabalho mediado por plataformas digitais.</p>
                  
                  <h3 style="color: #1e3c72; margin: 20px 0 10px 0;">2. Dados Coletados</h3>
                  <p>Coletamos apenas: respostas ao question√°rio, localiza√ß√£o geogr√°fica aproximada (para an√°lise regional) e dados t√©cnicos anonimizados. N√£o coletamos dados pessoais identific√°veis.</p>
                  
                  <h3 style="color: #1e3c72; margin: 20px 0 10px 0;">3. Anonimiza√ß√£o</h3>
                  <p>Todas as respostas s√£o anonimizadas durante o processamento. A localiza√ß√£o √© agregada em n√≠vel regional para an√°lise estat√≠stica.</p>
                  
                  <h3 style="color: #1e3c72; margin: 20px 0 10px 0;">4. Armazenamento</h3>
                  <p>Os dados s√£o armazenados em servidores seguros por 5 anos, conforme exigido pelas normas de pesquisa cient√≠fica, e depois exclu√≠dos permanentemente.</p>
                  
                  <h3 style="color: #1e3c72; margin: 20px 0 10px 0;">5. Compartilhamento</h3>
                  <p>Os dados podem ser compartilhados apenas em formato agregado e anonimizado para fins de publica√ß√£o cient√≠fica, sempre mantendo o anonimato dos participantes.</p>
                  
                  <h3 style="color: #1e3c72; margin: 20px 0 10px 0;">6. Seus Direitos</h3>
                  <p>Voc√™ tem direito a: acessar seus dados, solicitar corre√ß√µes ou exclus√£o, e retirar seu consentimento a qualquer momento atrav√©s do email: bessa.antonyonne@graduacao.uerj.br, informando o e-mail de cadastro do formul√°rio.</p>
                </div>
                <button onclick="this.parentElement.parentElement.remove()" 
                        style="
                          margin-top: 25px;
                          padding: 12px 24px;
                          background: #1e3c72;
                          color: white;
                          border: none;
                          border-radius: 8px;
                          cursor: pointer;
                          font-weight: 600;
                          width: 100%;
                        ">
                  Fechar
                </button>
              </div>
            </div>
          \`;
          
          const modal = document.createElement('div');
          modal.innerHTML = modalHTML;
          document.body.appendChild(modal);
        }
      </script>
    </body>
    </html>
